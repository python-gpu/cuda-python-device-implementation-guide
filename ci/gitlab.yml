#image: gitlab-master.nvidia.com:5005/hwinf-scm/pages-runner

pages:
  stage: deploy
  tags:
    - pages
  script:
    # Install pyenv to manage Python versions
    - export PYENV_ROOT="$CI_PROJECT_DIR/.pyenv"
    - curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash
    - export PATH="$PYENV_ROOT/bin:$PATH"
    - eval "$(pyenv init --path)"
    - eval "$(pyenv init -)"
    
    # Install Python 3.10
    - pyenv install 3.10.0
    - pyenv global 3.10.0
    - python --version
    
    # Install pip and requirements
    - curl -sSL https://bootstrap.pypa.io/get-pip.py -o get-pip.py
    - python get-pip.py
    - python -m pip install -r requirements.txt
    - make html
    - mv build/html/ public/
  artifacts:
    paths:
      - public
  only:
    - main